# PicPet Refined - ç”¢å“é–‹ç™¼ä¼åŠƒæ›¸ (Master Plan)

- ç‰ˆæœ¬ï¼š v2.0 (The Development Bible)
- æ—¥æœŸï¼š 2026-01-01
- é …ç›®è² è²¬äººï¼š NAM
- æŠ€è¡“é¡§å•ï¼š Gemini

## 1. ç”¢å“æ¦‚è¿° (Product Overview)
- ç”¢å“åç¨±ï¼š PicPet (æš«å®š)
- æ ¸å¿ƒåƒ¹å€¼ï¼š ä¸€æ¬¾åŸºæ–¼ã€ŒçœŸå¯¦ç›¸ç‰‡äº’å‹•ã€çš„ç¤¾äº¤å¯µç‰©é¤ŠæˆéŠæˆ²ã€‚å¼·èª¿ç•°åœ°å…±é¤Šã€æƒ…æ„Ÿé€£çµèˆ‡ AI æ™ºèƒ½åé¥‹ã€‚
- ç›®æ¨™å¹³å°ï¼š iOS & Android (Flutter è·¨å¹³å°é–‹ç™¼)
- ç›®æ¨™å¸‚å ´ï¼š å°ç£ã€é¦™æ¸¯ã€æ—¥æœ¬ (é¦–ç™¼)ï¼Œéš¨å¾Œæ“´å±•è‡³å…¨çƒã€‚
- èªè¨€æ”¯æ´ï¼š ç¹é«”ä¸­æ–‡ã€æ—¥æ–‡ (é¦–ç™¼)ï¼›è‹±æ–‡ (å¾ŒçºŒæ›´æ–°)ã€‚
- é–‹ç™¼ç›®æ¨™ï¼š æ‰“é€ æ¯”ç«¶å“ (PicPet/Widgetable) æ›´å…·ã€Œæ‰‹æ„Ÿã€èˆ‡ã€Œç”Ÿå‘½åŠ›ã€çš„å…±é¤Šé«”é©—ã€‚

## 2. ç”¨æˆ¶ç³»çµ±èˆ‡é…å° (User & Pairing)

### 2.1 å¸³æˆ¶é«”ç³»
- ç™»å…¥æ–¹å¼ (Login)ï¼šåƒ…æ”¯æ´ Google Sign-In èˆ‡ Apple Sign-In (ç„¡ Email/Password é¸é …ä»¥ç°¡åŒ–æµç¨‹)ã€‚
- å€‹äººæª”æ¡ˆ (Profile)ï¼š
  - æš±ç¨±ï¼šç”¨æˆ¶è‡ªå®šç¾©ã€‚
  - é ­åƒï¼šç³»çµ±æä¾›å¹¾æ¬¾é è¨­é¢¨æ ¼åŒ–é ­åƒï¼Œæˆ–ç”¨æˆ¶ä¸Šå‚³è‡ªå®šç¾©åœ–ç‰‡ã€‚
- åˆªé™¤å¸³è™Ÿ (Deletion)ï¼š
  - ç¬¦åˆ App Store è¦ç¯„ï¼Œæä¾›åˆªé™¤æŒ‰éˆ•ã€‚
  - æ­¸å±¬æ¬Šé‚è¼¯ï¼šè‹¥ç”¨æˆ¶ A åˆªé™¤å¸³è™Ÿï¼Œå…¶èˆ‡ç”¨æˆ¶ B å…±é¤Šçš„å¯µç‰©åŠæˆ¿é–“æ•¸æ“šå®Œæ•´ä¿ç•™ï¼Œæ‰€æœ‰æ¬Šè‡ªå‹•è½‰ç§»çµ¦ç”¨æˆ¶ Bã€‚

### 2.2 æˆ¿é–“èˆ‡é…å°æ©Ÿåˆ¶
- é‚€è«‹ç¢¼é‚è¼¯ï¼š
  - ç”±å¾Œç«¯ç”Ÿæˆ 6 ä½æ•¸éš¨æ©Ÿæ•¸å­—ã€‚
  - å”¯ä¸€æ€§æª¢æŸ¥ (Unique Check)ï¼šç”Ÿæˆå¾Œå³æ™‚æ¯”å° Databaseï¼Œç¢ºä¿ä¸èˆ‡ç¾æœ‰æˆ¿é–“é‡è¤‡ã€‚
  - æ™‚æ•ˆï¼šæœ‰æ•ˆæœŸ 60 åˆ†é˜ï¼ŒéæœŸéœ€é‡æ–°ç”Ÿæˆã€‚
  - æ¬Šé™è¦å‰‡ï¼šåªæœ‰æˆ¿ä¸» (Owner) å¯ç”Ÿæˆ/æ›´æ–°é‚€è«‹ç¢¼ä¸¦åˆ†äº«çµ¦å…¶ä»–äººï¼›ä¸€èˆ¬æˆå“¡ä¸å¯ç”Ÿæˆé‚€è«‹ç¢¼ã€‚
- å¤šæˆ¿é–“ç³»çµ± (Multi-room)ï¼š
  - å…è²»ç‰ˆï¼šä¸Šé™ 2 å€‹æˆ¿é–“ã€‚
  - ä»˜è²»ç‰ˆ (è¨‚é–±)ï¼šç„¡é™ æˆ¿é–“ã€‚
  - æ–°å¢é‚è¼¯ï¼šè‹¥å…è²»ç‰ˆå·²æ»¿ï¼Œé»æ“Šã€Œæ–°å¢æˆ¿é–“ã€æŒ‰éˆ•æ™‚å½ˆå‡ºä»˜è²»è¨‚é–±è¦–çª— (Upsell)ã€‚
- å–®äºº/å¤šäººæ¨¡å¼ï¼š
  - æ”¯æ´å–®äººéŠç© (è‡ªå·±é–‹æˆ¿è‡ªå·±é¤Š)ã€‚
  - éš¨æ™‚å¯é‚€è«‹æœ‹å‹åŠ å…¥ç¾æœ‰æˆ¿é–“ã€‚
  - è‹¥å…¶ä¸­ä¸€äººé›¢é–‹æˆ¿é–“ï¼Œæˆ¿é–“æ•¸æ“šä¿ç•™çµ¦å‰©ä¸‹çš„äººï¼Œä¸æœƒè¢«åˆªé™¤ã€‚
  - æˆ¿ä¸»è½‰ç§»ï¼šè‹¥æˆ¿ä¸»é›¢é–‹æˆ–åˆªé™¤å¸³è™Ÿï¼Œæˆ¿ä¸»æ¬Šé™è‡ªå‹•è½‰ç§»çµ¦ä»åœ¨æˆ¿é–“çš„æˆå“¡ï¼›è‹¥æˆ¿é–“ç„¡æˆ¿ä¸»ï¼Œä¸‹ä¸€ä½åŠ å…¥è€…æˆç‚ºæˆ¿ä¸»ã€‚

## 3. å¯µç‰©ç³»çµ±èˆ‡æ•¸å€¼ç­–åŠƒ (Pet & Stats)

### 3.1 ç”Ÿæˆèˆ‡æˆé•·
- åˆå§‹ç‹€æ…‹ï¼šå¯µç‰©è›‹ (Egg)ã€‚
- å­µåŒ–é‚è¼¯ (Color DNA)ï¼š
  - åŸºæ–¼ç©å®¶é¤µé£Ÿç…§ç‰‡çš„ ä¸»è‰²èª¿ (Dominant Color) æ±ºå®šå­µåŒ–çµæœã€‚
  - ä¾‹å­ï¼šé¤µé£Ÿå¤šå¼µè—è‰²ç‰©å“ (å¤©ç©ºã€å¤§æµ·ã€è—è“) -> å­µå‡ºè—è‰²ç³»å¯µç‰©ã€‚
  - æŠ€è¡“ï¼šä½¿ç”¨ Flutter palette_generator åˆ†æåœ–ç‰‡ã€‚
- æˆé•·ï¼šå¯µç‰©é«”å‹éš¨ã€Œå¤©æ•¸ã€èˆ‡ã€Œç­‰ç´šã€æŒ‰æ¯”ä¾‹è®Šå¤§ (Scale up)ã€‚
- å‘½åï¼šé›™æ–¹éš¨æ™‚å¯æ›´æ”¹å¯µç‰©åå­—ã€‚

### 3.2 æ•¸å€¼ç‹€æ…‹æ©Ÿ (State Machine Details)
- æ‰€æœ‰æ•¸å€¼è¨ˆç®—ä»¥ å¾Œç«¯ (Supabase) ç‚ºæº–ï¼Œå‰ç«¯åŒæ­¥é¡¯ç¤ºã€‚

#### A. é£½é£Ÿåº¦ (Hunger)
- ç¯„åœï¼š0 - 100ã€‚
- è‡ªç„¶æ¶ˆè€—ï¼šåŸºç¤ -5 é» / å°æ™‚ã€‚
- å¿ƒæƒ…ä¿®æ­£ (Mood Modifier)ï¼š
  - å¿ƒæƒ… Highï¼š-3 é» / å°æ™‚ (æ¶ˆè€—æ¸›æ…¢)ã€‚
  - å¿ƒæƒ… Midï¼š-4 é» / å°æ™‚ã€‚
  - å¿ƒæƒ… Lowï¼š-5 é» / å°æ™‚ã€‚
  - å¿ƒæƒ… Sad (ä¸”æœ‰å¤§ä¾¿æœªæ¸…ç†)ï¼š-6 é» / å°æ™‚ (æ¶ˆè€—åŠ å¿«)ã€‚
- å¤œé–“ä¿è­·æ©Ÿåˆ¶ (Night Mode)ï¼šç•¶ç©å®¶æ‰‹æ©Ÿæ™‚é–“ä½æ–¼ 00:00 - 08:00ï¼Œä»£è¬ç‡æ¸›åŠ (æ•¸å€¼æ¶ˆè€— *0.5)ã€‚
- éé£½æ©Ÿåˆ¶ï¼šè‹¥çŸ­æ™‚é–“å¤šæ¬¡é¤µé£Ÿï¼Œè§¸ç™¼å°è©±ã€Œå¥½é£½å‘€ï½ã€ï¼Œä¸æ‰£å¿ƒæƒ…ä½†ä¸åŠ æ•¸å€¼ã€‚

#### B. å¿ƒæƒ… (Mood)
- ç­‰ç´šï¼šLow (æ™®é€š) -> Mid (é–‹å¿ƒ) -> High (è¶…é–‹å¿ƒ) -> Sad (æ‚²å‚·/ç”Ÿç—…)ã€‚
- æå‡æ–¹å¼ï¼šæ‘¸é ­ (Touch) / é¤µé£Ÿ (Feed) / æ´—æ¾¡ (Clean)ã€‚
- æ¯å€‹å‹•ä½œæå‡ 1 å€‹ç­‰ç´šã€‚
- æŒçºŒæ™‚é–“ï¼šæå‡å¾Œçš„å¿ƒæƒ…ç­‰ç´šæŒçºŒ 1 å°æ™‚ï¼Œéš¨å¾Œè‡ªå‹•é™å›åŸç­‰ç´š (æˆ–è¦–ä¹é£½é£Ÿåº¦èª¿æ•´)ã€‚
- æ“ä½œå†·å» (Cooldown)ï¼šå°åŒä¸€å‹•ä½œ (å¦‚æ‘¸é ­)ï¼Œéœ€é–“éš” 2 å°æ™‚ æ‰èƒ½å†æ¬¡ç²å¾—å¿ƒæƒ…æå‡æ•ˆæœ (é˜²æ­¢åˆ·åˆ†)ã€‚

#### C. æ¸…æ½”åº¦ (Hygiene)
- æ’æ³„æ©Ÿåˆ¶ï¼š
  - é »ç‡ï¼šæ¯å¤© 1-2 æ¬¡ (éš¨æ©Ÿè§¸ç™¼ï¼Œæˆ–ç´¯ç©é¤µé£Ÿ 3 æ¬¡å¾Œè§¸ç™¼)ã€‚
  - è¨­è¨ˆæ„åœ–ï¼šé™ä½é »ç‡ä»¥å…é€ æˆç”¨æˆ¶å›°æ“¾ (Notification Spam)ã€‚
- æ‡²ç½°æ©Ÿåˆ¶ï¼šè‹¥å¤§ä¾¿å­˜åœ¨è¶…é 2 å°æ™‚ æœªæ¸…ç†ï¼Œå¿ƒæƒ…æ¯ 2 å°æ™‚é™ä¸€ç´šï¼Œç›´åˆ°è®Š Sadã€‚
- å¤œé–“ä¿è­·æ©Ÿåˆ¶ (Night Mode)ï¼šç•¶ç©å®¶æ‰‹æ©Ÿæ™‚é–“ä½æ–¼ 00:00 - 08:00ï¼Œä¸å› å¤§ä¾¿æœªæ¸…ç†è€Œæ‰£å¿ƒæƒ…ã€‚
- è¦–è¦ºè¡¨ç¾ï¼šå¯µç‰©è®Šè‰²ã€å‘¨åœæœ‰è’¼è …å‹•ç•«ã€‚

#### D. ç¡çœ  (Sleep)
- è·Ÿéš¨å¯µç‰©å…§ç½®ç”Ÿç†æ™‚é˜ (éš¨æ©Ÿæ€§)ï¼Œç´”è¦–è¦ºå‹•ç•« (Idle Animation)ï¼Œä¸å½±éŸ¿ç©å®¶äº’å‹•æ“ä½œ (ç¡è¦ºæ™‚ä»å¯å¼·è¡Œé¤µé£Ÿï¼Œä½†æœƒé¡¯ç¤ºç¡çœ¼æƒºå¿ªçš„æ¨£å­)ã€‚

## 4. ç¶“æ¿Ÿç³»çµ± (Economy)

### 4.1 è²¨å¹£ (Coins)
- ç²å–é€”å¾‘ï¼š
  - é¤µé£Ÿï¼š+10 Coinsã€‚
  - æ¸…ç†å¤§ä¾¿ï¼š+5 Coinsã€‚
  - æ‘¸é ­ï¼š+1 Coinã€‚
- ç²å–é™åˆ¶ï¼šæ¯ç¨®å‹•ä½œ æ¯å°æ™‚åªèƒ½ç²å¾—ä¸€æ¬¡ é‡‘å¹£çå‹µ (é˜²æ­¢è…³æœ¬åˆ·éŒ¢)ã€‚
- æ¯æ—¥ä»»å‹™çå‹µï¼šå®Œæˆ Daily Quest (å¦‚ï¼šå½±é›ªç³•) -> ç²å¾— é›™å€é‡‘å¹£ (+20)ã€‚

### 4.2 æ¶ˆè²»èˆ‡æ­»äº¡æ©Ÿåˆ¶
- å•†åº—å…§å®¹ï¼šå¯µç‰©å®¶å…·ã€èƒŒæ™¯ç‰†ç´™ (Cosmetic)ã€‚
- é›¢å®¶å‡ºèµ° (Death)ï¼š
  - æ¢ä»¶ï¼šé£½é£Ÿåº¦æ­¸ 0ã€‚
  - çµæœï¼šå¯µç‰©æ¶ˆå¤±ï¼Œç•™ä¸‹å‘Šåˆ¥ä¿¡ã€‚
  - æŒ½å›æ–¹å¼ï¼šéœ€è³¼è²·ä»˜è²»é“å…· ã€Œå®¶æ›¸ (Letter)ã€ (å–®æ¬¡å…§è³¼) å°‡å…¶å–šå›ã€‚

## 5. æ ¸å¿ƒç©æ³•èˆ‡ AI è­˜åˆ¥ (Gameplay Loop)

### 5.1 é¤µé£Ÿæµç¨‹ (Feeding Flow)
- è§¸ç™¼ï¼šé»æ“ŠèŠå¤©å®¤åº•éƒ¨å·¦å´çš„ [ğŸ“· ç›¸æ©Ÿ] æŒ‰éˆ•ã€‚
- è¼¸å…¥ï¼šæ‹ç…§æˆ–å¾ç›¸ç°¿é¸æ“‡ (å…è¨±éå¯¦æ™‚ç…§ç‰‡)ã€‚
- AI è™•ç† (Local)ï¼šä½¿ç”¨ Google ML Kit é€²è¡Œ Object Detectionã€‚
- Label æ˜ å°„å±¤ (Mapping Layer)ï¼š
  - ML Kit ç”¢ç”Ÿè‹±æ–‡æ¨™ç±¤ (e.g., "Cup", "Beverage")ï¼Œéœ€åœ¨ App ç«¯æˆ–å¾Œç«¯è½‰è­¯/æ¨¡ç³ŠåŒ¹é…è‡³ä¸­/æ—¥/è‹±ä»»å‹™è©å½™ï¼Œé¿å…ä»»å‹™åˆ¤å®šè½å·®ã€‚
  - æ˜ å°„å­—å…¸ï¼šä»¥ `label_mappings` / `quests` è¡¨ç‚ºåŸºæº–ç¶­è­·ï¼Œåˆç‰ˆè©å½™è¦‹ memory-bank/label-mapping.mdã€‚
- çµæœç¢ºèª (Modal)ï¼š
  - é¡¯ç¤ºé è¦½åœ–èˆ‡è­˜åˆ¥æ¨™ç±¤ (Label)ã€‚
  - Caption è¼¸å…¥æ¡†ï¼šé¸å¡« (Optional)ã€‚
- åˆ¤å®šé‚è¼¯ï¼š
  - ä»»å‹™åŒ¹é… (Match)ï¼šå¦‚ä»»å‹™æ˜¯ "Coffee"ï¼ŒAI è­˜åˆ¥å‡º "Drink/Cup" -> æˆåŠŸ (+20 Coins, Mood Up)ã€‚
  - éä»»å‹™ (Normal)ï¼šAI è­˜åˆ¥å‡ºä»»ä½•ç‰©ä»¶ -> æˆåŠŸ (+10 Coins, Mood Up)ã€‚
  - è­˜åˆ¥å¤±æ•— (Unknown/Fail)ï¼šAI ä¿¡å¿ƒåˆ†æ•¸éä½ -> ç•¶ä½œæ™®é€šåˆ†äº« (ç„¡ Coins, ç„¡ Mood è®ŠåŒ–, ä½†ç…§ç‰‡ä»ç™¼é€è‡³èŠå¤©å®¤)ã€‚
- å†·å»æª¢æŸ¥ï¼šè‹¥ 1 å°æ™‚å…§å·²ç²çå‹µï¼Œå‰‡åƒ…ç™¼é€ç…§ç‰‡ï¼Œä¸åŠ é‡‘å¹£ã€‚
- å®¢æˆ¶ç«¯é è™•ç† + å¾Œç«¯é©—è­‰ (Optimization)ï¼š
  - App ç«¯å…ˆå£“ç¸®åœ–ç‰‡ (WebP, 80% quality) ä¸¦å–å¾— Labelsï¼Œå†å°‡ Labels + åœ–ç‰‡ä¸Šå‚³è‡³ Supabase Edge Functionã€‚
  - ä¸è¦æŠŠåˆ¤æ–·é‚è¼¯å…¨æ”¾åœ¨å‰ç«¯ï¼Œé¿å…è¢«ç«„æ”¹ï¼›ç”±å¾Œç«¯é©—è­‰ Labels æ˜¯å¦ç¬¦åˆä»»å‹™ã€‚

### 5.2 å…§å®¹å¯©æŸ¥ (Safety)
- å·¥å…·ï¼šGoogle ML Kit Image Labeling (å…§å»º Safe Search)ã€‚
- é‚è¼¯ï¼šè‹¥åµæ¸¬åˆ° Adult, Violence ç­‰æ•æ„Ÿæ¨™ç±¤ä¸”ä¿¡å¿ƒåˆ†æ•¸ > 0.7 -> å‰ç«¯ç›´æ¥æ””æˆªï¼Œå½ˆå‡ºè­¦å‘Šï¼Œç¦æ­¢ä¸Šå‚³ã€‚

## 6. èŠå¤©å®¤èˆ‡å›æ†¶ (Chat & Memory)

### 6.1 æ··åˆäº‹ä»¶æµ (Hybrid Stream)
èŠå¤©å®¤æ˜¯éŠæˆ²çš„ã€Œå®¢å»³ã€ï¼Œæ•´åˆä»¥ä¸‹ä¸‰ç¨®è¨Šæ¯ï¼š
- æ–‡å­—å°è©±ï¼šç”¨æˆ¶è¼¸å…¥çš„ Chatã€‚
- é¤µé£Ÿè¨˜éŒ„ï¼šå¸¶æœ‰ç‰¹æ®Šé‚Šæ¡†çš„ç…§ç‰‡å¡ç‰‡ (é¡¯ç¤ºï¼š[åœ–ç‰‡] +10 Coins)ã€‚
- ç³»çµ±äº‹ä»¶ï¼šç°è‰²å°å­— (å¦‚ï¼šã€ŒBå› å¹«å¿™æ¸…ç†äº†å¤§ä¾¿ã€)ã€‚

### 6.2 æŠ€è¡“å¯¦ä½œç´°ç¯€
- å³æ™‚æ€§ï¼šSupabase Realtimeã€‚
- åŠ è¼‰ç­–ç•¥ï¼š
  - åˆ†é  (Pagination)ï¼šé¦–æ¬¡åŠ è¼‰æœ€æ–° 20 æ¢ã€‚
  - æ‡¶åŠ è¼‰ (Lazy Loading)ï¼šæ»‘å‹•åˆ°é ‚éƒ¨æ™‚ï¼Œè‡ªå‹•åŠ è¼‰èˆŠçš„ 20 æ¢ã€‚
- åœ–ç‰‡å„²å­˜ (Cloudflare R2)ï¼š
  - å£“ç¸®ï¼šApp ç«¯å¼·åˆ¶è½‰ç‚º WebP æ ¼å¼ï¼Œç›®æ¨™å¤§å° 100KBã€‚
  - ä¿ç•™ç­–ç•¥ï¼šæ°¸ä¹…ä¿å­˜ï¼Œä¸éæœŸã€‚
  - å¿«å–ï¼šå‰ç«¯ä½¿ç”¨ cached_network_imageï¼Œé¿å…é‡è¤‡æ¶ˆè€—æµé‡ã€‚

### 6.3 åœ–é‘‘/å›æ†¶éŒ„
- å½¢å¼ï¼šæœˆæ›†è¦–åœ– (Calendar View)ã€‚
- æ•¸æ“šï¼šç›´æ¥å¾èŠå¤©è¨˜éŒ„ä¸­ç¯©é¸ type = image_feed çš„è¨Šæ¯é€²è¡Œå±•ç¤ºã€‚
- åŠŸèƒ½ï¼šé»æ“Šå¯æŸ¥çœ‹å¤§åœ–ä¸¦ä¸‹è¼‰ã€‚

## 7. UI äº¤äº’è¦ç¯„ (UI/UX)

### 7.1 ä¸»ä»‹é¢ (Home) - æ²‰æµ¸å¼ç–Šå±¤
- æ¡ç”¨ Stack ä½ˆå±€ï¼š
  - Layer 1 (åº•å±¤)ï¼šæˆ¿é–“èƒŒæ™¯åœ–ã€‚
  - Layer 2 (ä¸­å±¤)ï¼šRive å¯µç‰©å‹•ç•« (ä½æ–¼ç•«é¢ä¸­å¤®åä¸Š)ã€‚
  - Layer 3 (é ‚å±¤)ï¼šå¯æ‹–å‹•åº•æ¿ (DraggableScrollableSheet)ï¼Œæ‰¿è¼‰èŠå¤©å®¤ã€‚
- äº’å‹•ï¼šé»æ“Šå¯µç‰©è§¸ç™¼ Bounce å‹•ç•«ï¼›é•·æŒ‰é¡¯ç¤ºç‹€æ…‹æ•¸å€¼ã€‚
- åˆå§‹é«˜åº¦ï¼š40% (éœ²å‡ºå¯µç‰©)ã€‚
- æœ€å¤§é«˜åº¦ï¼š90% (å…¨å±é–±è®€)ã€‚
- èƒŒæ™¯ï¼šæ¯›ç»ç’ƒ (Blur) åŠé€æ˜æ•ˆæœã€‚
- æ‰‹å‹¢è¡çªä¿®æ­£ï¼š
  - ç‚ºé¿å… DraggableScrollableSheet èˆ‡èŠå¤©å®¤ ListView æ»‘å‹•è¡çªï¼Œæ¡ã€Œæœªå…¨é–‹ç¦æ­¢ ListView æ»¾å‹•ã€æˆ–ã€Œå°ˆç”¨ Grab Handle æ‰èƒ½æ‹–å‹•é¢æ¿ã€çš„è¨­è¨ˆã€‚

### 7.2 è¼¸å…¥æ¬„ (Input Bar)
- å›ºå®šåœ¨ Layer 3 åº•éƒ¨ã€‚
- ä½ˆå±€ï¼š[ğŸ“· ç›¸æ©Ÿ (é«˜äº®è‰²)] - [ è¼¸å…¥æ¡† (ä½” 80%) ] - [ç™¼é€]ã€‚
- ç›¸æ©ŸæŒ‰éˆ•ï¼šç½®æ–¼æœ€å·¦å´ï¼Œè¨­è¨ˆä¸Šéœ€çªå‡ºï¼Œå¼•å°ç”¨æˆ¶é»æ“Šã€‚

### 7.3 å´é‚Šé¸å–® (Drawer)
- é»æ“Šå·¦ä¸Šè§’æ¼¢å ¡åŒ…åœ–ç¤ºæ»‘å‡ºã€‚
- é¡¯ç¤ºæ‰€æœ‰æˆ¿é–“åˆ—è¡¨ (å…è²»ç‰ˆ 2 å€‹)ã€‚
- é»æ“Š [+] æ–°å¢æˆ¿é–“ è‹¥é¡æ»¿ï¼Œç›´æ¥è·³è½‰è¨‚é–±é é¢ã€‚

## 7.4 è¨­è¨ˆå¸«äº¤ä»˜ç¯„åœ (MVP Design Checklist)
ç›®çš„ï¼šå…ˆæ»¿è¶³æ ¸å¿ƒç©æ³•èˆ‡é¦–è¼ªå•†æ¥­åŒ–æ¸¬è©¦ï¼Œäº¤ä»˜å¯ç”¨æ–¼é–‹ç™¼èˆ‡é©—æ”¶çš„è¨­è¨ˆèˆ‡ç´ æã€‚

### 7.4.1 MVP è¨­è¨ˆç¯„åœ
- æ ¸å¿ƒæµç¨‹ï¼šç™»å…¥/è¨»å†Šã€å»ºç«‹æˆ¿é–“ã€è¼¸å…¥é‚€è«‹ç¢¼åŠ å…¥ã€ä¸»ç•«é¢èŠå¤©/é¤µé£Ÿã€æ¯æ—¥ä»»å‹™æç¤ºã€‚
- ä¸»è¦é é¢ï¼šHome (å¯µç‰© + Chat)ã€Room List/Drawerã€Feed ç¢ºèªå½ˆçª—ã€Memory æœˆæ›†ã€Storeã€Settingsã€è¨‚é–± Upsellã€‚
- ç‹€æ…‹ç¨¿ï¼šç©ºç‹€æ…‹ (ç„¡è¨Šæ¯/ç„¡ä»»å‹™/ç„¡æˆ¿é–“)ã€è¼‰å…¥ä¸­ã€éŒ¯èª¤/é›¢ç·šã€æˆåŠŸæç¤ºã€‚
- å…ƒä»¶åº«ï¼šèŠå¤©æ°£æ³¡ã€ç…§ç‰‡å¡ç‰‡ (å« +Coins)ã€ç³»çµ±äº‹ä»¶å¡ã€ç‹€æ…‹æ•¸å€¼æç¤ºã€Grab Handleã€ç›¸æ©ŸæŒ‰éˆ•ã€‚
- å»£å‘Š/å…§è³¼ï¼šRewarded ad å½ˆçª—ã€è¨‚é–±æ–¹æ¡ˆæ¯”è¼ƒå¡ã€ä»˜æ¬¾æˆåŠŸ/å¤±æ•—å›é¥‹ã€‚
- å¤šèªç³»ï¼šä¸­æ–‡/æ—¥æ–‡ä¸»è¦å­—ä¸²ç‰ˆé¢ç¢ºèªï¼Œé¿å…æ–‡å­—æº¢å‡ºã€‚
- å‹•æ•ˆæŒ‡å¼•ï¼šRive å‹•ç•«é€²å ´/äº’å‹•è¦ç¯„èˆ‡ UI å‹•ç•«ç¯€å¥ã€‚

### 7.4.2 äº¤ä»˜æ¸…å–® (Deliverables)
- ä»‹é¢è¨­è¨ˆï¼šä¸»è¦ç•«é¢èˆ‡ç‹€æ…‹ç¨¿ã€‚
- å…ƒä»¶åº«ï¼šå¯é‡ç”¨ UI å…ƒä»¶èˆ‡æ¨£å¼ã€‚
- Pet æœ¬é«”ï¼šå¯µç‰©é€ å‹èˆ‡åŸºæœ¬ç‹€æ…‹ (Rive / PNG)ã€‚

### 7.4.3 äº¤ä»˜æŒ‡å¼• (é Figma ä½¿ç”¨è€…é©ç”¨)
- å¯äº¤ä»˜ PNG (é€æ˜åº•) / SVG / JPG / PDF åœ–æª”ã€‚
- å»ºè­°è¼¸å‡º 2x/3x å°ºå¯¸ï¼Œé¿å…æ”¾å¤§å¤±çœŸã€‚
- åˆ†ä»¶è¼¸å‡ºï¼šèƒŒæ™¯ã€æŒ‰éˆ•ã€iconã€Pet æœ¬é«”åˆ†é–‹ã€‚
- å‘½åæ¸…æ¥šï¼šå¦‚ `home_bg.png`ã€`btn_camera.png`ã€`pet_idle.png`ã€‚

### 7.4.4 ç´ ææ ¼å¼è¦æ ¼è¡¨
| ç´ æé¡å‹ | æ ¼å¼ | èªªæ˜ |
| --- | --- | --- |
| Icon / ç·šæ¢åœ–å½¢ | SVG | å¯ç¸®æ”¾ä¸å¤±çœŸï¼Œé©åˆ UI å…ƒä»¶ |
| èƒŒæ™¯ / å¤§åœ– | PNG (2x/3x) | è¤‡é›œè³ªæ„Ÿæˆ–æ’ç•« |
| ç…§ç‰‡å¡ç‰‡ | PNG/JPG | è¦–è¦ºå±¤ç´ æ |
| Pet éœæ…‹åœ– | PNG | ç„¡å‹•ç•«æ™‚ä½¿ç”¨ |
| Pet å‹•ç•« | Rive (.riv) | ç”±å‘é‡åˆ†å±¤ç´ æè£½ä½œ |

### 7.4.5 Rive ç´ æå»ºè­°
- æœ€ä½³ç´ æï¼šåˆ†å±¤ SVG/AI (èº«é«”ã€çœ¼ã€å£ã€æ‰‹è…³ã€é£¾å“ç¨ç«‹)ã€‚
- PNG åªé©åˆéœæ…‹æˆ–é€æ ¼å‹•ç•«ï¼Œæ”¾å¤§æ˜“ç³Šã€ä¸æ˜“åšéª¨éª¼å‹•ç•«ã€‚
- é¿å…è¤‡é›œæ¿¾é¡/æ¨¡ç³Šï¼Œæ–‡å­—éœ€è½‰ outlineã€‚

## 8. å•†æ¥­åŒ– (Monetization)

### 8.1 å»£å‘Š (Ads)
- æ’å±å»£å‘Š (Interstitial)ï¼šæ”¹ç‚ºå¯é¸çš„ã€Œé›™å€çå‹µã€æ¿€å‹µè¦–é »æµç¨‹ï¼š
  - é¤µé£Ÿå®Œæˆ -> ç²å¾— 10 Coins -> å½ˆçª—ã€Œçœ‹å»£å‘Šç²å¾—é›™å€ (20 Coins)ï¼Ÿã€-> ç”¨æˆ¶ä¸»å‹•é»æ“Šæ’­æ”¾ã€‚
- Banner å»£å‘Šï¼šåƒ…åœ¨ã€Œè¨­å®šã€æˆ–ã€Œå•†åº—ã€é é¢åº•éƒ¨ï¼Œä¸å¹²æ“¾ä¸»éŠæˆ²å€ã€‚
- æ¿€å‹µè¦–é » (Rewarded)ï¼šä¸»å‹•è§€çœ‹ä»¥ç²å¾—é‡‘å¹£æˆ–ç¸®çŸ­å†·å»æ™‚é–“ã€‚

### 8.2 å…§è³¼ (IAP)
- è¨‚é–± (Subscription)ï¼šå»é™¤æ‰€æœ‰å»£å‘Š + ç„¡é™æˆ¿é–“ã€‚
- æ¶ˆè€—å“ (Consumable)ï¼š
  - é‡‘å¹£åŒ…ã€‚
  - æˆ¿é–“åé¡æ“´å……ã€‚
  - å®¶æ›¸ (Letter)ï¼šå¾©æ´»é“å…·ã€‚

## 9. é¢¨éšªæ§åˆ¶èˆ‡åˆè¦ (Risk & Compliance)
- èˆ‰å ±æ©Ÿåˆ¶ (Report)ï¼šåœ¨èŠå¤©å®¤ä¸­é•·æŒ‰å°æ–¹è¨Šæ¯/åœ–ç‰‡ï¼Œéœ€å½ˆå‡ºã€Œèˆ‰å ±ã€èˆ‡ã€Œå°é–ã€é¸é … (App Store å¿…é ˆ)ã€‚
- éš±ç§è²æ˜ï¼šæ¢æ¬¾éœ€è¨»æ˜ã€Œæˆ‘å€‘åš´æ ¼ä¿è­·ç”¨æˆ¶éš±ç§ï¼Œä¸æœƒä¸»å‹•æŸ¥çœ‹ç”¨æˆ¶å…§å®¹ã€ (ä¿ç•™é‹ç¶­æ‰€éœ€çš„æœ€ä½é™åº¦æ¬Šé™)ã€‚
- RLS Policies (Supabase)ï¼š
  - å¿…é ˆå•Ÿç”¨ Row Level Securityï¼Œç¢ºä¿ç”¨æˆ¶åªèƒ½è®€å–è‡ªå·±æˆ¿é–“è³‡æ–™ã€‚
  - ä¾‹ï¼šSELECT * FROM messages WHERE room_id IN (SELECT room_id FROM room_members WHERE user_id = auth.uid())ã€‚
- å¼·åˆ¶æ›´æ–° (Force Update)ï¼šApp å•Ÿå‹•æ™‚æª¢æŸ¥ Supabase app_config è¡¨ä¸­çš„ min_versionï¼Œè‹¥ä½æ–¼æ­¤ç‰ˆæœ¬ï¼Œå¼·åˆ¶å½ˆçª—è·³è½‰å•†åº—æ›´æ–°ã€‚
- é›¢ç·šè™•ç†ï¼šæ–·ç¶²æ™‚ï¼ŒèŠå¤©å®¤è¨Šæ¯é¡¯ç¤ºã€Œç™¼é€ä¸­...ã€æˆ–ã€Œç´…è‰²æ„Ÿå˜†è™Ÿã€ï¼Œå…è¨±é‡è©¦ã€‚

## 10. æŠ€è¡“æ£§æ¸…å–® (Tech Stack Checklist)
- Frontend: Flutter (Dart)
- State Management: Riverpod
- Animation: Rive (rive package)
- Local DB: Hive (for local cache & settings)
- Backend: Supabase (Auth, Postgres DB, Realtime)
- Storage: Cloudflare R2 (S3 compatible API)
- Push Notification: Firebase Cloud Messaging (FCM)
- AI: Google ML Kit (google_mlkit_image_labeling, google_mlkit_object_detection)
- Analytics: Firebase Analytics (Default)
